{{ $item := . }}

{{/* Check if we received a dictionary with item and index */}}
{{ if reflect.IsMap . }}
  {{ $item = .item }}
{{ end }}

{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

<div class="news-item-card mb-4 p-4" style="background: #fff; border-left: 6px solid #1565c0; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-radius: 4px; transition: transform 0.2s;">
  
  <div class="article-metadata mb-2" style="font-family: Georgia, serif; color: #777; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.05em;">
    {{ if $item.Params.publication_short }}
      {{ $item.Params.publication_short | markdownify }}
    {{ else if $item.Params.publication }}
      {{ $item.Params.publication | markdownify }}
    {{ else }}
      {{ $item.Date.Format "January 2, 2006" }}
    {{ end }}
  </div>

  <h2 class="article-title mb-3 mt-0" style="font-family: Georgia, serif; font-weight: bold; font-size: 1.8rem;">
    <a href="{{ $link }}" {{ $target | safeHTMLAttr }} style="color: #111; text-decoration: none;">
      {{ $item.Title }}
    </a>
  </h2>

  <div class="article-style" style="font-family: Georgia, serif; color: #444; line-height: 1.6; font-size: 1.1rem;">
    {{ ($item.Params.summary | default $item.Summary) | plainify | htmlUnescape | chomp | truncate 250 }}
  </div>

  <div class="mt-3">
    <a href="{{ $link }}" {{ $target | safeHTMLAttr }} style="font-family: Georgia, serif; color: #1565c0; font-weight: bold; text-decoration: none; font-size: 0.95rem;">
      Read More &rarr;
    </a>
  </div>
</div>
